# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ SSH-—Ç—É–Ω–Ω–µ–ª—è –¥–ª—è OpenWRT

–ù–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ SSH-—Ç—É–Ω–Ω–µ–ª—è –º–µ–∂–¥—É OpenWRT –∏ VPS —Å–µ—Ä–≤–µ—Ä–æ–º.

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–∏ —Å–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É—é—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ SSH-—Ç—É–Ω–Ω–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É OpenWRT —á–µ—Ä–µ–∑ VPS —Å–µ—Ä–≤–µ—Ä, –¥–∞–∂–µ –µ—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞ NAT.

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ OpenSSH –∏ Dropbear
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ firewall –Ω–∞ VPS
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ SSH-–∫–ª—é—á–µ–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ —Ç—É–Ω–Ω–µ–ª—è
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç—É–Ω–Ω–µ–ª—è

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ VPS
–°–Ω–∞—á–∞–ª–∞ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ VPS —Å–µ—Ä–≤–µ—Ä:
```bash
sh <(wget -O - https://raw.githubusercontent.com/vkust/setup_reverse_tunnel/main/setup_vps.sh)
```

–°–∫—Ä–∏–ø—Ç:
- –ù–∞—Å—Ç—Ä–æ–∏—Ç SSH —Å–µ—Ä–≤–µ—Ä
- –ù–∞—Å—Ç—Ä–æ–∏—Ç firewall (UFW –∏–ª–∏ IPTables)
- –°–æ–∑–¥–∞—Å—Ç —Å–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç—É–Ω–Ω–µ–ª–µ–π
- –î–æ–±–∞–≤–∏—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ cron

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OpenWRT
–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ VPS, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ OpenWRT:
```bash
sh <(wget -O - https://raw.githubusercontent.com/vkust/setup_reverse_tunnel/main/setup_reverse_tunnel.sh)
```

–°–∫—Ä–∏–ø—Ç:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç SSH (OpenSSH –∏–ª–∏ Dropbear)
- –°–æ–∑–¥–∞—Å—Ç SSH-–∫–ª—é—á–∏
- –ù–∞—Å—Ç—Ä–æ–∏—Ç –æ–±—Ä–∞—Ç–Ω—ã–π —Ç—É–Ω–Ω–µ–ª—å
- –°–æ–∑–¥–∞—Å—Ç —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

### –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ üìñ
–ï—Å–ª–∏ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç—É–Ω–Ω–µ–ª—å –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ [–ø–æ–¥—Ä–æ–±–Ω–æ–º—É —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É](MANUAL.md).

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- VPS —Å root –¥–æ—Å—Ç—É–ø–æ–º
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å OpenWRT
- –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –Ω–∞ –æ–±–æ–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Ç—É–Ω–Ω–µ–ª—è –Ω–∞ OpenWRT:
```bash
/etc/init.d/reverse-tunnel status
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—É–Ω–Ω–µ–ª–µ–π –Ω–∞ VPS:
```bash
/root/check_tunnels.sh
```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—É–Ω–Ω–µ–ª–µ–º

–ù–∞ OpenWRT –¥–æ—Å—Ç—É–ø–Ω—ã –∫–æ–º–∞–Ω–¥—ã:
```bash
/etc/init.d/reverse-tunnel start    # –ó–∞–ø—É—Å–∫ —Ç—É–Ω–Ω–µ–ª—è
/etc/init.d/reverse-tunnel stop     # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç—É–Ω–Ω–µ–ª—è
/etc/init.d/reverse-tunnel restart  # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ç—É–Ω–Ω–µ–ª—è
/etc/init.d/reverse-tunnel enable   # –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
/etc/init.d/reverse-tunnel disable  # –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
```